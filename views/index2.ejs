<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Boxicons CSS -->
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
    <title>AgroGuide</title>
    <link rel="icon"  href="/logo.png">
    <link rel="stylesheet" href="/style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+Khitan+Small+Script&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  </head>
  <body>
    <!-- navbar -->
    <nav class="navbar">
      <div class="logo_item">
        <i class="bx bx-menu" id="sidebarOpen"></i>
        <img src="/logo.png" alt=""></i>AgroGuide
      </div>
      
      <form action="/search" method="GET">
        <div class="search">
          <button class="search-icon" type="submit">
            <span class="material-symbols-outlined">search</span>
        </button>
            <input class="search-input" type="search" name="query" placeholder="Search for products">

        </div>
    </form>

      <div class="navbar_content">

        <% if (check == 1) { %>
          <div><b>Welcome <%= user.username %></b></div>
          <a href="#" class="nav-link">
            <i class="fa-solid fa-user"></i>
          </a>
        <% } else { %>
          <a href="http://localhost:8080/login" class="nav-link">Log In</a>
          <a href="http://localhost:8080/signup" class="nav-link">Sign Up</a>
        <% } %>
  
      </div>



    </nav>
    <div class="container101">
    <!-- sidebar -->
      <nav class="sidebar">
        <div class="menu_content">
          <ul class="menu_items">
            <div class="menu_title menu_dahsboard"></div>
            <!-- duplicate or remove this li tag if you want to add or remove navlink with submenu -->
            <!-- start -->
            <li class="item">
              <div class="nav_link submenu_item">
                <span class="navlink_icon">
                  <i class="bx bx-home-alt"></i>
                </span>
                <a href="#Home" class="Home"></a>
                <span class="navlink">Home</span>
              </div>
            </li>
            <li class="item">
              <a href="http://localhost:8080/contract_search" class="nav_link submenu_item">
                <span class="navlink_icon">
                  <i class="fa-solid fa-file-contract"></i>
                </span>
                <span class="navlink">Contact Contractors</span>
              </a>
            </li>
            
            <!-- end -->

            <!-- duplicate this li tag if you want to add or remove  navlink with submenu -->
            <!-- start -->
            <li class="item">
              <div href="#" class="nav_link submenu_item">
                <span class="navlink_icon">
                  <i class="bx bx-grid-alt"></i>
                </span>
                <span class="navlink">Overview</span>
                <i class="bx bx-chevron-right arrow-left"></i>
              </div>

              <ul class="menu_items submenu">
                <% Object.keys(groupedProducts).forEach(category => { %>
                    <a href="#<%= category.trim().split(' ')[0].toLowerCase() %>" class="nav_link sublink">
                        <li><%= category %></li>
                    </a>
                <% }) %>
            </ul>
            </li>
            <!-- end -->
          </ul>

          <ul class="menu_items">
            <div class="menu_title menu_editor"></div>
            <!-- duplicate these li tag if you want to add or remove navlink only -->
            <!-- Start -->
            <li class="item">
              <a href="http://localhost:8080/predict" class="nav_link">
                <span class="navlink_icon">
                  <i class="bx bxs-magic-wand"></i>
                </span>
                <span class="navlink">Prediction</span>
              </a>
            </li>
            <!-- End -->

            <li class="item">
              <a href="#" class="nav_link">
                <span class="navlink_icon">
                  <i class="bx bx-loader-circle"></i>
                </span>
                <span class="navlink">Chat</span>
              </a>
            </li>
            <li class="item">
              <a href="#" class="nav_link">
                <span class="navlink_icon">
                  <i class="bx bx-cloud-upload"></i>
                </span>
                <span class="navlink">Upload new</span>
              </a>
            </li>
          </ul>
          <ul class="menu_items">
            <div class="menu_title menu_setting"></div>
            <li class="item">
              <a href="#" class="nav_link">
                <span class="navlink_icon">
                  <i class="bx bx-flag"></i>
                </span>
                <span class="navlink">Notice board</span>
              </a>
            </li>
            <li class="item">
              <a href="#" class="nav_link">
                <span class="navlink_icon">
                  <i class="bx bx-medal"></i>
                </span>
                <span class="navlink">Award</span>
              </a>
            </li>
            <li class="item">
              <a href="#" class="nav_link">
                <span class="navlink_icon">
                  <i class="bx bx-cog"></i>
                </span>
                <span class="navlink">Setting</span>
              </a>
            </li>
          </ul>

          <!-- Sidebar Open / Close -->
          <div class="bottom_content">
            <div class="bottom expand_sidebar">
              <span> Expand</span>
              <i class='bx bx-log-in' ></i>
            </div>
            <div class="bottom collapse_sidebar">
              <span> Collapse</span>
              <i class='bx bx-log-out'></i>
            </div>
          </div>
        </div>
      </nav>

      <nav class="main-content" id="Home">
        <section  class="container">
          <div class="slider-wrapper">
              <div class="slider">
                  <img id="slide-1" src="/offer1.jpg" alt="Offer1">
                  <img id="slide-2" src="/offer2.jpg" alt="Offer2">
                  <img id="slide-3" src="/offer3.jpg" alt="Offer3">
                  <div class="slider-nav">
                      <a href="#slide-1"></a>
                      <a href="#slide-2"></a>
                      <a href="#slide-3"></a>
                  </div>
              </div>
          </div>
        </section>

        <% Object.keys(groupedProducts).forEach(category => { %>
          <h1 id="<%= category.trim().split(' ')[0].toLowerCase() %>" class="topic"><%= category %></h1>
          <div class="main-div">
            <% groupedProducts[category].forEach(product => { %>
              <a href="/product/<%= product.id %>" class="product-link">
                <div class="in-content">
                  <div class="img-div">
                    <img src="/products/<%= product.type %>.jpg" class="card-img" alt="<%= product.type %>">
                  </div>
                  <p2 class="card-title">&#x20b9 <%= product.price %></p2>
                  <br><br>
                  <p1 class="card-title"><%= product.type %></p1>
                  <br>
                  <p1 class="card-info"><%= product.small_description %></p1>
                  <br>
                  <p1 class="card-info"><b>Company:</b> <%= product.company_name %></p1>
                </div>
              </a>
            <% }) %>
          </div>
        <% }) %>

        
          <div class="footer"></div>
            <div class="line"></div>
          </div>
      </nav>
    </div>


    <!-- JavaScript -->
    <script>
const sidebar = document.querySelector(".sidebar");
const submenuItems = document.querySelectorAll(".submenu_item");
const sidebarOpen = document.querySelector("#sidebarOpen");
const sidebarClose = document.querySelector(".collapse_sidebar");
const sidebarExpand = document.querySelector(".expand_sidebar");


document.querySelectorAll('.nav_link.sublink').forEach(anchor => {
  anchor.addEventListener('click', function(e) {
    e.preventDefault();
    document.querySelector(this.getAttribute('href')).scrollIntoView({
      behavior: 'smooth'
    });
  });
});

document.addEventListener('DOMContentLoaded', function() {
  document.querySelectorAll('.Home').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
      e.preventDefault();
      document.querySelector(this.getAttribute('href')).scrollIntoView({
        behavior: 'smooth'
      });
    });
  });
});



sidebarOpen.addEventListener("click", () => sidebar.classList.toggle("close"));

sidebarClose.addEventListener("click", () => {
  sidebar.classList.add("close", "hoverable");
});

sidebarExpand.addEventListener("click", () => {
  sidebar.classList.remove("close", "hoverable");
});

submenuItems.forEach((item, index) => {
  item.addEventListener("click", () => {
    item.classList.toggle("show_submenu");
    submenuItems.forEach((item2, index2) => {
      if (index !== index2) {
        item2.classList.remove("show_submenu");
      }
    });
  });
});

if (window.innerWidth < 768) {
  sidebar.classList.add("close");
}


    </script>
  </body>
</html>
